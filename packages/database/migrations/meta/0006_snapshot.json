{
  "id": "0071c5cb-5b7a-4592-91ab-5287b73bfad2",
  "prevId": "0e1a32de-939a-4a88-a376-f54a04ed1ce3",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.plan_modules": {
      "name": "plan_modules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "plan_id": {
          "name": "plan_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "plan_modules_plan_id_order_index_unique": {
          "name": "plan_modules_plan_id_order_index_unique",
          "columns": [
            {
              "expression": "plan_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plan_modules_plan_id_idx": {
          "name": "plan_modules_plan_id_idx",
          "columns": [
            {
              "expression": "plan_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plan_modules_plan_id_plans_id_fk": {
          "name": "plan_modules_plan_id_plans_id_fk",
          "tableFrom": "plan_modules",
          "tableTo": "plans",
          "columnsFrom": ["plan_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.plan_sessions": {
      "name": "plan_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "public_id": {
          "name": "public_id",
          "type": "varchar(12)",
          "primaryKey": false,
          "notNull": true
        },
        "plan_id": {
          "name": "plan_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "module_id": {
          "name": "module_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_type": {
          "name": "session_type",
          "type": "plan_session_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "objective": {
          "name": "objective",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_for_date": {
          "name": "scheduled_for_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "estimated_minutes": {
          "name": "estimated_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "source_references": {
          "name": "source_references",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "plan_session_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'SCHEDULED'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "plan_sessions_public_id_unique": {
          "name": "plan_sessions_public_id_unique",
          "columns": [
            {
              "expression": "public_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plan_sessions_plan_id_idx": {
          "name": "plan_sessions_plan_id_idx",
          "columns": [
            {
              "expression": "plan_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plan_sessions_scheduled_for_date_idx": {
          "name": "plan_sessions_scheduled_for_date_idx",
          "columns": [
            {
              "expression": "scheduled_for_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plan_sessions_plan_id_status_idx": {
          "name": "plan_sessions_plan_id_status_idx",
          "columns": [
            {
              "expression": "plan_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plan_sessions_plan_id_plans_id_fk": {
          "name": "plan_sessions_plan_id_plans_id_fk",
          "tableFrom": "plan_sessions",
          "tableTo": "plans",
          "columnsFrom": ["plan_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "plan_sessions_module_id_plan_modules_id_fk": {
          "name": "plan_sessions_module_id_plan_modules_id_fk",
          "tableFrom": "plan_sessions",
          "tableTo": "plan_modules",
          "columnsFrom": ["module_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.coach_messages": {
      "name": "coach_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "content_md": {
          "name": "content_md",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "context_json": {
          "name": "context_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "coach_messages_user_date_unique": {
          "name": "coach_messages_user_date_unique",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "coach_messages_user_id_users_id_fk": {
          "name": "coach_messages_user_id_users_id_fk",
          "tableFrom": "coach_messages",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.auth_accounts": {
      "name": "auth_accounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "auth_provider",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "provider_account_id": {
          "name": "provider_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "access_token_enc": {
          "name": "access_token_enc",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "refresh_token_enc": {
          "name": "refresh_token_enc",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scopes": {
          "name": "scopes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "auth_accounts_provider_account_unique": {
          "name": "auth_accounts_provider_account_unique",
          "columns": [
            {
              "expression": "provider",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "provider_account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "auth_accounts_user_id_idx": {
          "name": "auth_accounts_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "auth_accounts_user_id_users_id_fk": {
          "name": "auth_accounts_user_id_users_id_fk",
          "tableFrom": "auth_accounts",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.auth_sessions": {
      "name": "auth_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_token_hash": {
          "name": "session_token_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_ip": {
          "name": "created_ip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rotated_from_id": {
          "name": "rotated_from_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "auth_sessions_token_hash_unique": {
          "name": "auth_sessions_token_hash_unique",
          "columns": [
            {
              "expression": "session_token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "auth_sessions_user_id_idx": {
          "name": "auth_sessions_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "auth_sessions_expires_at_idx": {
          "name": "auth_sessions_expires_at_idx",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "auth_sessions_user_id_users_id_fk": {
          "name": "auth_sessions_user_id_users_id_fk",
          "tableFrom": "auth_sessions",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.magic_link_tokens": {
      "name": "magic_link_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token_hash": {
          "name": "token_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "consumed_at": {
          "name": "consumed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "redirect_path": {
          "name": "redirect_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_ip": {
          "name": "created_ip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "magic_link_tokens_token_hash_unique": {
          "name": "magic_link_tokens_token_hash_unique",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "magic_link_tokens_expires_at_idx": {
          "name": "magic_link_tokens_expires_at_idx",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "magic_link_tokens_email_idx": {
          "name": "magic_link_tokens_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "user_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'ACTIVE'"
        },
        "locale": {
          "name": "locale",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'ko-KR'"
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Asia/Seoul'"
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "subscription_plan": {
          "name": "subscription_plan",
          "type": "subscription_plan",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'FREE'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "users_email_unique": {
          "name": "users_email_unique",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.material_chunks": {
      "name": "material_chunks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "material_id": {
          "name": "material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "ordinal": {
          "name": "ordinal",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token_count": {
          "name": "token_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "page_start": {
          "name": "page_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "page_end": {
          "name": "page_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "section_path": {
          "name": "section_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "material_chunks_material_id_ordinal_unique": {
          "name": "material_chunks_material_id_ordinal_unique",
          "columns": [
            {
              "expression": "material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ordinal",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "material_chunks_material_id_idx": {
          "name": "material_chunks_material_id_idx",
          "columns": [
            {
              "expression": "material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "material_chunks_material_id_materials_id_fk": {
          "name": "material_chunks_material_id_materials_id_fk",
          "tableFrom": "material_chunks",
          "tableTo": "materials",
          "columnsFrom": ["material_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.material_embeddings": {
      "name": "material_embeddings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "chunk_id": {
          "name": "chunk_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "vector": {
          "name": "vector",
          "type": "vector(1536)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "material_embeddings_chunk_id_idx": {
          "name": "material_embeddings_chunk_id_idx",
          "columns": [
            {
              "expression": "chunk_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "material_embeddings_chunk_id_material_chunks_id_fk": {
          "name": "material_embeddings_chunk_id_material_chunks_id_fk",
          "tableFrom": "material_embeddings",
          "tableTo": "material_chunks",
          "columnsFrom": ["chunk_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.material_jobs": {
      "name": "material_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "material_id": {
          "name": "material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_type": {
          "name": "job_type",
          "type": "material_job_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "material_job_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'QUEUED'"
        },
        "progress": {
          "name": "progress",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "error_json": {
          "name": "error_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "material_jobs_material_id_idx": {
          "name": "material_jobs_material_id_idx",
          "columns": [
            {
              "expression": "material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "material_jobs_status_idx": {
          "name": "material_jobs_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "material_jobs_material_id_materials_id_fk": {
          "name": "material_jobs_material_id_materials_id_fk",
          "tableFrom": "material_jobs",
          "tableTo": "materials",
          "columnsFrom": ["material_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.material_uploads": {
      "name": "material_uploads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "material_upload_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'INITIATED'"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "object_key": {
          "name": "object_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "final_object_key": {
          "name": "final_object_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "original_filename": {
          "name": "original_filename",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "etag": {
          "name": "etag",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "material_id": {
          "name": "material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "material_uploads_user_id_created_at_idx": {
          "name": "material_uploads_user_id_created_at_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "material_uploads_expires_at_idx": {
          "name": "material_uploads_expires_at_idx",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "material_uploads_status_idx": {
          "name": "material_uploads_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "material_uploads_user_id_users_id_fk": {
          "name": "material_uploads_user_id_users_id_fk",
          "tableFrom": "material_uploads",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "material_uploads_material_id_materials_id_fk": {
          "name": "material_uploads_material_id_materials_id_fk",
          "tableFrom": "material_uploads",
          "tableTo": "materials",
          "columnsFrom": ["material_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.materials": {
      "name": "materials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "original_filename": {
          "name": "original_filename",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_url": {
          "name": "source_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "storage_provider": {
          "name": "storage_provider",
          "type": "storage_provider",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'R2'"
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "file_size": {
          "name": "file_size",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "checksum": {
          "name": "checksum",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processing_status": {
          "name": "processing_status",
          "type": "material_processing_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "materials_user_id_idx": {
          "name": "materials_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "materials_user_id_created_at_idx": {
          "name": "materials_user_id_created_at_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "materials_user_id_not_deleted_idx": {
          "name": "materials_user_id_not_deleted_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"materials\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "materials_user_id_users_id_fk": {
          "name": "materials_user_id_users_id_fk",
          "tableFrom": "materials",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.outline_nodes": {
      "name": "outline_nodes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "material_id": {
          "name": "material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "node_type": {
          "name": "node_type",
          "type": "outline_node_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "keywords": {
          "name": "keywords",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "depth": {
          "name": "depth",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "path": {
          "name": "path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata_json": {
          "name": "metadata_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "outline_nodes_material_id_idx": {
          "name": "outline_nodes_material_id_idx",
          "columns": [
            {
              "expression": "material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "outline_nodes_parent_id_idx": {
          "name": "outline_nodes_parent_id_idx",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "outline_nodes_material_id_materials_id_fk": {
          "name": "outline_nodes_material_id_materials_id_fk",
          "tableFrom": "outline_nodes",
          "tableTo": "materials",
          "columnsFrom": ["material_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "outline_nodes_parent_id_outline_nodes_id_fk": {
          "name": "outline_nodes_parent_id_outline_nodes_id_fk",
          "tableFrom": "outline_nodes",
          "tableTo": "outline_nodes",
          "columnsFrom": ["parent_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.plan_generation_request_materials": {
      "name": "plan_generation_request_materials",
      "schema": "",
      "columns": {
        "request_id": {
          "name": "request_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "material_id": {
          "name": "material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "plan_generation_request_materials_request_id_idx": {
          "name": "plan_generation_request_materials_request_id_idx",
          "columns": [
            {
              "expression": "request_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plan_generation_request_materials_request_id_plan_generation_requests_id_fk": {
          "name": "plan_generation_request_materials_request_id_plan_generation_requests_id_fk",
          "tableFrom": "plan_generation_request_materials",
          "tableTo": "plan_generation_requests",
          "columnsFrom": ["request_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "plan_generation_request_materials_material_id_materials_id_fk": {
          "name": "plan_generation_request_materials_material_id_materials_id_fk",
          "tableFrom": "plan_generation_request_materials",
          "tableTo": "materials",
          "columnsFrom": ["material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "plan_generation_request_materials_request_id_material_id_pk": {
          "name": "plan_generation_request_materials_request_id_material_id_pk",
          "columns": ["request_id", "material_id"]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.plan_generation_requests": {
      "name": "plan_generation_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "plan_generation_request_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'DRAFT'"
        },
        "target_due_date": {
          "name": "target_due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "special_requirements": {
          "name": "special_requirements",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "preview_json": {
          "name": "preview_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "plan_generation_requests_user_id_idx": {
          "name": "plan_generation_requests_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plan_generation_requests_user_id_users_id_fk": {
          "name": "plan_generation_requests_user_id_users_id_fk",
          "tableFrom": "plan_generation_requests",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.plan_source_materials": {
      "name": "plan_source_materials",
      "schema": "",
      "columns": {
        "plan_id": {
          "name": "plan_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "material_id": {
          "name": "material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "material_title_snapshot": {
          "name": "material_title_snapshot",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "plan_source_materials_plan_id_idx": {
          "name": "plan_source_materials_plan_id_idx",
          "columns": [
            {
              "expression": "plan_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plan_source_materials_material_id_idx": {
          "name": "plan_source_materials_material_id_idx",
          "columns": [
            {
              "expression": "material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plan_source_materials_plan_id_plans_id_fk": {
          "name": "plan_source_materials_plan_id_plans_id_fk",
          "tableFrom": "plan_source_materials",
          "tableTo": "plans",
          "columnsFrom": ["plan_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "plan_source_materials_material_id_materials_id_fk": {
          "name": "plan_source_materials_material_id_materials_id_fk",
          "tableFrom": "plan_source_materials",
          "tableTo": "materials",
          "columnsFrom": ["material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "plan_source_materials_plan_id_material_id_pk": {
          "name": "plan_source_materials_plan_id_material_id_pk",
          "columns": ["plan_id", "material_id"]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.plans": {
      "name": "plans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "public_id": {
          "name": "public_id",
          "type": "varchar(12)",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "generation_request_id": {
          "name": "generation_request_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'target'"
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'blue'"
        },
        "status": {
          "name": "status",
          "type": "plan_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PAUSED'"
        },
        "target_due_date": {
          "name": "target_due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "special_requirements": {
          "name": "special_requirements",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "archived_at": {
          "name": "archived_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "generation_status": {
          "name": "generation_status",
          "type": "plan_generation_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'READY'"
        },
        "generation_error": {
          "name": "generation_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "plans_public_id_unique": {
          "name": "plans_public_id_unique",
          "columns": [
            {
              "expression": "public_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plans_user_id_idx": {
          "name": "plans_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plans_user_id_status_idx": {
          "name": "plans_user_id_status_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "plans_one_active_per_user_unique": {
          "name": "plans_one_active_per_user_unique",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"plans\".\"status\" = 'ACTIVE'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plans_user_id_users_id_fk": {
          "name": "plans_user_id_users_id_fk",
          "tableFrom": "plans",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "plans_generation_request_id_plan_generation_requests_id_fk": {
          "name": "plans_generation_request_id_plan_generation_requests_id_fk",
          "tableFrom": "plans",
          "tableTo": "plan_generation_requests",
          "columnsFrom": ["generation_request_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.rag_collections": {
      "name": "rag_collections",
      "schema": "",
      "columns": {
        "uuid": {
          "name": "uuid",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "cmetadata": {
          "name": "cmetadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_rag_collections_name": {
          "name": "idx_rag_collections_name",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.rag_documents": {
      "name": "rag_documents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "vector": {
          "name": "vector",
          "type": "vector(1536)",
          "primaryKey": false,
          "notNull": false
        },
        "collection_id": {
          "name": "collection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "rag_documents_collection_id_rag_collections_uuid_fk": {
          "name": "rag_documents_collection_id_rag_collections_uuid_fk",
          "tableFrom": "rag_documents",
          "tableTo": "rag_collections",
          "columnsFrom": ["collection_id"],
          "columnsTo": ["uuid"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.session_activities": {
      "name": "session_activities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "session_run_id": {
          "name": "session_run_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "kind": {
          "name": "kind",
          "type": "session_activity_kind",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "prompt": {
          "name": "prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_answer": {
          "name": "user_answer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_eval_json": {
          "name": "ai_eval_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "session_activities_run_id_idx": {
          "name": "session_activities_run_id_idx",
          "columns": [
            {
              "expression": "session_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "session_activities_session_run_id_session_runs_id_fk": {
          "name": "session_activities_session_run_id_session_runs_id_fk",
          "tableFrom": "session_activities",
          "tableTo": "session_runs",
          "columnsFrom": ["session_run_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.session_checkins": {
      "name": "session_checkins",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "session_run_id": {
          "name": "session_run_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "kind": {
          "name": "kind",
          "type": "session_checkin_kind",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "prompt": {
          "name": "prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "response_json": {
          "name": "response_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "recorded_at": {
          "name": "recorded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "session_checkins_run_id_idx": {
          "name": "session_checkins_run_id_idx",
          "columns": [
            {
              "expression": "session_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "session_checkins_session_run_id_session_runs_id_fk": {
          "name": "session_checkins_session_run_id_session_runs_id_fk",
          "tableFrom": "session_checkins",
          "tableTo": "session_runs",
          "columnsFrom": ["session_run_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.session_progress_snapshots": {
      "name": "session_progress_snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "session_run_id": {
          "name": "session_run_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "step_index": {
          "name": "step_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "payload_json": {
          "name": "payload_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "session_progress_snapshots_run_id_idx": {
          "name": "session_progress_snapshots_run_id_idx",
          "columns": [
            {
              "expression": "session_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "session_progress_snapshots_session_run_id_session_runs_id_fk": {
          "name": "session_progress_snapshots_session_run_id_session_runs_id_fk",
          "tableFrom": "session_progress_snapshots",
          "tableTo": "session_runs",
          "columnsFrom": ["session_run_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.session_run_blueprints": {
      "name": "session_run_blueprints",
      "schema": "",
      "columns": {
        "session_run_id": {
          "name": "session_run_id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true
        },
        "schema_version": {
          "name": "schema_version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "blueprint_json": {
          "name": "blueprint_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "session_run_blueprints_run_id_idx": {
          "name": "session_run_blueprints_run_id_idx",
          "columns": [
            {
              "expression": "session_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "session_run_blueprints_session_run_id_session_runs_id_fk": {
          "name": "session_run_blueprints_session_run_id_session_runs_id_fk",
          "tableFrom": "session_run_blueprints",
          "tableTo": "session_runs",
          "columnsFrom": ["session_run_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.session_runs": {
      "name": "session_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "public_id": {
          "name": "public_id",
          "type": "varchar(12)",
          "primaryKey": false,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "plan_id": {
          "name": "plan_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "session_run_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "exit_reason": {
          "name": "exit_reason",
          "type": "session_exit_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "session_runs_public_id_unique": {
          "name": "session_runs_public_id_unique",
          "columns": [
            {
              "expression": "public_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "session_runs_user_id_idx": {
          "name": "session_runs_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "session_runs_session_id_idx": {
          "name": "session_runs_session_id_idx",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "session_runs_user_idempotency_key_unique": {
          "name": "session_runs_user_idempotency_key_unique",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "idempotency_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "session_runs_running_unique": {
          "name": "session_runs_running_unique",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"session_runs\".\"status\" = 'RUNNING'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "session_runs_session_id_plan_sessions_id_fk": {
          "name": "session_runs_session_id_plan_sessions_id_fk",
          "tableFrom": "session_runs",
          "tableTo": "plan_sessions",
          "columnsFrom": ["session_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "session_runs_user_id_users_id_fk": {
          "name": "session_runs_user_id_users_id_fk",
          "tableFrom": "session_runs",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "session_runs_plan_id_plans_id_fk": {
          "name": "session_runs_plan_id_plans_id_fk",
          "tableFrom": "session_runs",
          "tableTo": "plans",
          "columnsFrom": ["plan_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.session_summaries": {
      "name": "session_summaries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "session_run_id": {
          "name": "session_run_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "summary_md": {
          "name": "summary_md",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "session_summaries_run_id_unique": {
          "name": "session_summaries_run_id_unique",
          "columns": [
            {
              "expression": "session_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "session_summaries_session_run_id_session_runs_id_fk": {
          "name": "session_summaries_session_run_id_session_runs_id_fk",
          "tableFrom": "session_summaries",
          "tableTo": "session_runs",
          "columnsFrom": ["session_run_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.auth_provider": {
      "name": "auth_provider",
      "schema": "public",
      "values": ["GOOGLE"]
    },
    "public.material_job_status": {
      "name": "material_job_status",
      "schema": "public",
      "values": ["QUEUED", "RUNNING", "SUCCEEDED", "FAILED"]
    },
    "public.material_job_type": {
      "name": "material_job_type",
      "schema": "public",
      "values": ["TEXT_EXTRACT", "OUTLINE", "CHUNK", "EMBED"]
    },
    "public.material_processing_status": {
      "name": "material_processing_status",
      "schema": "public",
      "values": ["PENDING", "PROCESSING", "READY", "FAILED"]
    },
    "public.material_upload_status": {
      "name": "material_upload_status",
      "schema": "public",
      "values": ["INITIATED", "COMPLETED", "FAILED", "EXPIRED"]
    },
    "public.outline_node_type": {
      "name": "outline_node_type",
      "schema": "public",
      "values": ["SECTION", "TOPIC"]
    },
    "public.plan_generation_request_status": {
      "name": "plan_generation_request_status",
      "schema": "public",
      "values": [
        "DRAFT",
        "SUBMITTED",
        "GENERATING",
        "SUCCEEDED",
        "FAILED",
        "CANCELED"
      ]
    },
    "public.plan_generation_status": {
      "name": "plan_generation_status",
      "schema": "public",
      "values": ["PENDING", "GENERATING", "READY", "FAILED"]
    },
    "public.plan_session_status": {
      "name": "plan_session_status",
      "schema": "public",
      "values": ["SCHEDULED", "IN_PROGRESS", "COMPLETED", "SKIPPED", "CANCELED"]
    },
    "public.plan_session_type": {
      "name": "plan_session_type",
      "schema": "public",
      "values": ["LEARN"]
    },
    "public.plan_status": {
      "name": "plan_status",
      "schema": "public",
      "values": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
    },
    "public.session_activity_kind": {
      "name": "session_activity_kind",
      "schema": "public",
      "values": ["EXERCISE", "MCQ", "FREEFORM", "CODE"]
    },
    "public.session_checkin_kind": {
      "name": "session_checkin_kind",
      "schema": "public",
      "values": ["QUESTION", "SELF_ASSESSMENT", "BEHAVIOR_SIGNAL"]
    },
    "public.session_exit_reason": {
      "name": "session_exit_reason",
      "schema": "public",
      "values": ["USER_EXIT", "NETWORK", "ERROR", "TIMEOUT"]
    },
    "public.session_run_status": {
      "name": "session_run_status",
      "schema": "public",
      "values": ["RUNNING", "COMPLETED", "ABANDONED"]
    },
    "public.storage_provider": {
      "name": "storage_provider",
      "schema": "public",
      "values": ["R2"]
    },
    "public.subscription_plan": {
      "name": "subscription_plan",
      "schema": "public",
      "values": ["FREE", "PRO"]
    },
    "public.user_status": {
      "name": "user_status",
      "schema": "public",
      "values": ["ACTIVE", "DISABLED"]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
