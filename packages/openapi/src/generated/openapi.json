{
  "openapi": "3.1.0",
  "info": {
    "title": "Learning OS API",
    "version": "1.0.0",
    "description": "Learning OS (docs 기반) API 문서입니다."
  },
  "servers": [
    {
      "url": "http://localhost:3001",
      "description": "Development server"
    }
  ],
  "security": [
    {
      "cookieAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "session",
        "description": "Session cookie for user authentication"
      }
    },
    "schemas": {
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "minLength": 1
              },
              "message": {
                "type": "string",
                "minLength": 1
              },
              "details": {
                "type": "object",
                "additionalProperties": {}
              },
              "validation": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "field": {
                      "type": "string",
                      "minLength": 1
                    },
                    "code": {
                      "type": "string",
                      "minLength": 1
                    },
                    "message": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": ["field", "code", "message"]
                }
              }
            },
            "required": ["code", "message"]
          }
        },
        "required": ["error"]
      }
    },
    "parameters": {}
  },
  "paths": {
    "/api/auth/google": {
      "get": {
        "tags": ["auth"],
        "summary": "Google OAuth 시작",
        "description": "Google 로그인 페이지로 리다이렉트합니다.\n\n**옵션**: `redirectPath`로 로그인 후 이동할 경로 지정",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": false,
            "name": "redirectPath",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "Google OAuth consent page로 리다이렉트합니다."
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/google/callback": {
      "get": {
        "tags": ["auth"],
        "summary": "Google OAuth 콜백",
        "description": "Google OAuth 인증 완료 후 콜백 처리를 담당합니다. 세션 쿠키를 발급합니다.",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": false,
            "name": "code",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": false,
            "name": "state",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "error",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "error_description",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "세션 쿠키를 설정한 뒤 redirectPath로 리다이렉트합니다."
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/magic-link": {
      "post": {
        "tags": ["auth"],
        "summary": "이메일 매직링크 요청",
        "description": "입력한 이메일로 로그인 링크를 전송합니다. 비밀번호 없이 로그인할 수 있습니다.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "redirectPath": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": ["email", "redirectPath"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "매직링크 전송 요청이 접수되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/magic-link/verify": {
      "get": {
        "tags": ["auth"],
        "summary": "매직링크 검증",
        "description": "이메일의 매직링크 토큰을 검증하고 세션을 생성합니다.",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "required": true,
            "name": "token",
            "in": "query"
          }
        ],
        "responses": {
          "302": {
            "description": "세션 쿠키를 설정한 뒤 redirectPath로 리다이렉트합니다."
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "tags": ["auth"],
        "summary": "현재 사용자 조회",
        "description": "현재 로그인한 사용자의 정보를 조회합니다. 인증 상태 확인에 사용됩니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "현재 로그인한 사용자를 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "email": {
                          "type": "string",
                          "format": "email"
                        },
                        "displayName": {
                          "type": "string",
                          "minLength": 1
                        },
                        "avatarUrl": {
                          "type": ["string", "null"],
                          "format": "uri"
                        },
                        "locale": {
                          "type": "string",
                          "minLength": 1
                        },
                        "timezone": {
                          "type": "string",
                          "minLength": 1
                        },
                        "subscriptionPlan": {
                          "type": "string",
                          "enum": ["FREE", "PRO"]
                        }
                      },
                      "required": [
                        "id",
                        "email",
                        "displayName",
                        "avatarUrl",
                        "locale",
                        "timezone",
                        "subscriptionPlan"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": ["auth"],
        "summary": "로그아웃",
        "description": "현재 세션을 종료하고 쿠키를 삭제합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "로그아웃되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/materials": {
      "get": {
        "tags": ["materials"],
        "summary": "자료 목록 조회",
        "description": "사용자의 학습 자료 목록을 페이지네이션과 함께 조회합니다.\n\n**필터링 옵션**: `status`, `search`, `sort`",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": ["PENDING", "PROCESSING", "READY", "FAILED"]
            },
            "required": false,
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "sort",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "자료 목록을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "title": {
                            "type": "string",
                            "minLength": 1
                          },
                          "mimeType": {
                            "type": ["string", "null"],
                            "minLength": 1
                          },
                          "fileSize": {
                            "type": ["integer", "null"],
                            "minimum": 0
                          },
                          "processingStatus": {
                            "type": "string",
                            "enum": ["PENDING", "PROCESSING", "READY", "FAILED"]
                          },
                          "processingProgress": {
                            "type": ["integer", "null"],
                            "minimum": 0,
                            "maximum": 100
                          },
                          "processingStep": {
                            "type": ["string", "null"]
                          },
                          "processingError": {
                            "type": ["string", "null"]
                          },
                          "summary": {
                            "type": ["string", "null"]
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "title",
                          "mimeType",
                          "fileSize",
                          "processingStatus",
                          "processingProgress",
                          "processingStep",
                          "processingError",
                          "summary",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "page": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "totalPages": {
                          "type": "integer",
                          "minimum": 0
                        }
                      },
                      "required": ["total", "page", "limit", "totalPages"]
                    }
                  },
                  "required": ["data", "meta"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/materials/{materialId}": {
      "get": {
        "tags": ["materials"],
        "summary": "자료 상세 조회",
        "description": "학습 자료의 상세 정보를 조회합니다. 추출된 개념, 원본 텍스트 등을 포함합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "materialId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "자료 상세를 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "title": {
                          "type": "string",
                          "minLength": 1
                        },
                        "originalFilename": {
                          "type": ["string", "null"]
                        },
                        "mimeType": {
                          "type": ["string", "null"],
                          "minLength": 1
                        },
                        "fileSize": {
                          "type": ["integer", "null"],
                          "minimum": 0
                        },
                        "processingStatus": {
                          "type": "string",
                          "enum": ["PENDING", "PROCESSING", "READY", "FAILED"]
                        },
                        "processingProgress": {
                          "type": ["integer", "null"],
                          "minimum": 0,
                          "maximum": 100
                        },
                        "processingStep": {
                          "type": ["string", "null"]
                        },
                        "processingError": {
                          "type": ["string", "null"]
                        },
                        "processedAt": {
                          "type": ["string", "null"],
                          "format": "date-time"
                        },
                        "summary": {
                          "type": ["string", "null"]
                        },
                        "chunkCount": {
                          "type": ["integer", "null"],
                          "minimum": 0
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "title",
                        "originalFilename",
                        "mimeType",
                        "fileSize",
                        "processingStatus",
                        "processingProgress",
                        "processingStep",
                        "processingError",
                        "processedAt",
                        "summary",
                        "chunkCount",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["materials"],
        "summary": "자료 삭제",
        "description": "학습 자료를 삭제합니다. 연관된 개념, 임베딩도 함께 삭제됩니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "materialId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "soft/hard delete 결과를 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "minLength": 1
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": ["soft", "hard"]
                        }
                      },
                      "required": ["type"]
                    }
                  },
                  "required": ["message", "data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["materials"],
        "summary": "자료 제목 수정",
        "description": "학습 자료의 제목을 수정합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "materialId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200
                  }
                },
                "required": ["title"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "자료 제목이 수정되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "title": {
                          "type": "string",
                          "minLength": 1
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": ["id", "title", "updatedAt"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/materials/uploads/init": {
      "post": {
        "tags": ["materials"],
        "summary": "R2 업로드 세션 생성",
        "description": "파일 업로드를 위한 Presigned URL을 발급합니다.\n\n**지원 형식**: PDF, DOCX, TXT 등",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "originalFilename": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "mimeType": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "fileSize": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 52428800
                  }
                },
                "required": ["originalFilename", "mimeType", "fileSize"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "R2 presigned PUT URL을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "uploadId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "objectKey": {
                          "type": "string",
                          "minLength": 1
                        },
                        "uploadUrl": {
                          "type": "string",
                          "format": "uri"
                        },
                        "method": {
                          "type": "string",
                          "enum": ["PUT"]
                        },
                        "headers": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "string"
                          }
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "uploadId",
                        "objectKey",
                        "uploadUrl",
                        "method",
                        "headers",
                        "expiresAt"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/materials/uploads/complete": {
      "post": {
        "tags": ["materials"],
        "summary": "R2 업로드 완료 처리",
        "description": "R2에 파일 업로드 완료 후 자료 분석을 시작합니다. 비동기 처리 시 `jobId`를 반환합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "uploadId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "title": {
                    "type": "string",
                    "maxLength": 200
                  },
                  "etag": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": ["uploadId"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "동기 처리로 업로드/분석이 완료되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "title": {
                          "type": "string",
                          "minLength": 1
                        },
                        "processingStatus": {
                          "type": "string",
                          "enum": ["PENDING", "PROCESSING", "READY", "FAILED"]
                        },
                        "summary": {
                          "type": ["string", "null"]
                        }
                      },
                      "required": ["id", "title", "processingStatus"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "202": {
            "description": "비동기 처리로 접수되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "jobId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "processingStatus": {
                          "type": "string",
                          "enum": ["PENDING", "PROCESSING", "READY", "FAILED"]
                        }
                      },
                      "required": ["id", "jobId", "processingStatus"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/materials/uploads/complete/stream": {
      "post": {
        "tags": ["materials"],
        "summary": "R2 업로드 완료 처리 (SSE 스트림)",
        "description": "SSE를 통해 업로드 완료 처리 진행 상황을 실시간으로 전달합니다.\\n\\n**이벤트 타입**:\\n- `progress`: 진행 상황 업데이트\\n- `complete`: 처리 완료\\n- `error`: 에러 발생",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "uploadId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "title": {
                    "type": "string",
                    "maxLength": 200
                  },
                  "etag": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": ["uploadId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "SSE 스트림으로 진행 상황을 전달합니다.",
            "content": {
              "text/event-stream": {
                "schema": {}
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/plans": {
      "get": {
        "tags": ["plans"],
        "summary": "Plan 목록 조회",
        "description": "사용자의 학습 계획 목록을 조회합니다.\n\n**필터링**: `status`별 조회 가능",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
            },
            "required": false,
            "name": "status",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan 목록을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                          },
                          "title": {
                            "type": "string",
                            "minLength": 1
                          },
                          "icon": {
                            "type": "string"
                          },
                          "color": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "ACTIVE",
                              "PAUSED",
                              "ARCHIVED",
                              "COMPLETED"
                            ]
                          },
                          "generationStatus": {
                            "type": "string",
                            "enum": ["PENDING", "GENERATING", "READY", "FAILED"]
                          },
                          "generationProgress": {
                            "type": ["integer", "null"],
                            "minimum": 0,
                            "maximum": 100
                          },
                          "generationStep": {
                            "type": ["string", "null"]
                          },
                          "generationError": {
                            "type": ["string", "null"]
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "progress": {
                            "type": "object",
                            "properties": {
                              "completedSessions": {
                                "type": "integer",
                                "minimum": 0
                              },
                              "totalSessions": {
                                "type": "integer",
                                "minimum": 0
                              }
                            },
                            "required": ["completedSessions", "totalSessions"]
                          },
                          "sourceMaterialIds": {
                            "type": "array",
                            "items": {
                              "type": "string",
                              "format": "uuid"
                            }
                          }
                        },
                        "required": [
                          "id",
                          "title",
                          "icon",
                          "color",
                          "status",
                          "generationStatus",
                          "generationProgress",
                          "generationStep",
                          "generationError",
                          "createdAt",
                          "updatedAt",
                          "progress",
                          "sourceMaterialIds"
                        ]
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "page": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 1
                        }
                      },
                      "required": ["total", "page", "limit"]
                    }
                  },
                  "required": ["data", "meta"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["plans"],
        "summary": "Plan 생성",
        "description": "AI가 자료를 분석하여 학습 계획을 생성합니다. 생성 요청이 접수되면 `jobId`를 반환합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "materialIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "minItems": 1,
                    "maxItems": 5
                  },
                  "targetDueDate": {
                    "type": ["string", "null"],
                    "format": "date"
                  },
                  "specialRequirements": {
                    "type": "string",
                    "maxLength": 2000
                  },
                  "icon": {
                    "type": "string",
                    "maxLength": 50
                  },
                  "color": {
                    "type": "string",
                    "maxLength": 50
                  }
                },
                "required": ["materialIds", "targetDueDate"]
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Plan 생성 요청이 접수되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "title": {
                          "type": "string",
                          "minLength": 1
                        },
                        "icon": {
                          "type": "string"
                        },
                        "color": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
                        },
                        "generationStatus": {
                          "type": "string",
                          "enum": ["PENDING", "GENERATING", "READY", "FAILED"]
                        },
                        "generationProgress": {
                          "type": ["integer", "null"],
                          "minimum": 0,
                          "maximum": 100
                        },
                        "generationStep": {
                          "type": ["string", "null"]
                        },
                        "generationError": {
                          "type": ["string", "null"]
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": [
                        "id",
                        "title",
                        "icon",
                        "color",
                        "status",
                        "generationStatus",
                        "generationProgress",
                        "generationStep",
                        "generationError",
                        "createdAt",
                        "updatedAt"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/plans/{planId}": {
      "get": {
        "tags": ["plans"],
        "summary": "Plan 상세 조회",
        "description": "학습 계획의 상세 정보를 조회합니다. 세션 목록과 진행률을 포함합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "planId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan 상세를 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "title": {
                          "type": "string",
                          "minLength": 1
                        },
                        "icon": {
                          "type": "string"
                        },
                        "color": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
                        },
                        "generationStatus": {
                          "type": "string",
                          "enum": ["PENDING", "GENERATING", "READY", "FAILED"]
                        },
                        "generationProgress": {
                          "type": ["integer", "null"],
                          "minimum": 0,
                          "maximum": 100
                        },
                        "generationStep": {
                          "type": ["string", "null"]
                        },
                        "generationError": {
                          "type": ["string", "null"]
                        },
                        "targetDueDate": {
                          "type": ["string", "null"],
                          "format": "date"
                        },
                        "specialRequirements": {
                          "type": ["string", "null"]
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "progress": {
                          "type": "object",
                          "properties": {
                            "completedSessions": {
                              "type": "integer",
                              "minimum": 0
                            },
                            "totalSessions": {
                              "type": "integer",
                              "minimum": 0
                            }
                          },
                          "required": ["completedSessions", "totalSessions"]
                        },
                        "sourceMaterialIds": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "format": "uuid"
                          }
                        },
                        "materials": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "title": {
                                "type": "string"
                              },
                              "summary": {
                                "type": ["string", "null"]
                              },
                              "mimeType": {
                                "type": ["string", "null"]
                              }
                            },
                            "required": ["id", "title", "summary", "mimeType"]
                          }
                        },
                        "modules": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "title": {
                                "type": "string",
                                "minLength": 1
                              },
                              "description": {
                                "type": ["string", "null"]
                              },
                              "orderIndex": {
                                "type": "integer",
                                "minimum": 0
                              }
                            },
                            "required": [
                              "id",
                              "title",
                              "description",
                              "orderIndex"
                            ]
                          }
                        },
                        "sessions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                              },
                              "moduleId": {
                                "type": ["string", "null"],
                                "format": "uuid"
                              },
                              "sessionType": {
                                "type": "string",
                                "enum": ["LEARN"]
                              },
                              "title": {
                                "type": "string",
                                "minLength": 1
                              },
                              "objective": {
                                "type": ["string", "null"]
                              },
                              "orderIndex": {
                                "type": "integer",
                                "minimum": 0
                              },
                              "scheduledForDate": {
                                "type": "string",
                                "format": "date"
                              },
                              "estimatedMinutes": {
                                "type": "integer",
                                "minimum": 1
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "SCHEDULED",
                                  "IN_PROGRESS",
                                  "COMPLETED",
                                  "SKIPPED",
                                  "CANCELED"
                                ]
                              },
                              "completedAt": {
                                "type": ["string", "null"],
                                "format": "date-time"
                              }
                            },
                            "required": [
                              "id",
                              "moduleId",
                              "sessionType",
                              "title",
                              "objective",
                              "orderIndex",
                              "scheduledForDate",
                              "estimatedMinutes",
                              "status",
                              "completedAt"
                            ]
                          }
                        }
                      },
                      "required": [
                        "id",
                        "title",
                        "icon",
                        "color",
                        "status",
                        "generationStatus",
                        "generationProgress",
                        "generationStep",
                        "generationError",
                        "targetDueDate",
                        "specialRequirements",
                        "createdAt",
                        "updatedAt",
                        "progress",
                        "sourceMaterialIds",
                        "materials",
                        "modules",
                        "sessions"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["plans"],
        "summary": "Plan 수정",
        "description": "학습 계획의 제목, 아이콘, 색상 등을 수정합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "planId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200
                  },
                  "icon": {
                    "type": "string",
                    "maxLength": 50
                  },
                  "color": {
                    "type": "string",
                    "maxLength": 50
                  },
                  "status": {
                    "type": "string",
                    "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan이 수정되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "title": {
                          "type": "string"
                        },
                        "icon": {
                          "type": "string"
                        },
                        "color": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
                        }
                      },
                      "required": ["id", "title", "icon", "color", "status"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["plans"],
        "summary": "Plan 삭제",
        "description": "학습 계획을 삭제합니다. 세션 기록도 함께 삭제됩니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "planId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan이 삭제되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/plans/{planId}/status": {
      "patch": {
        "tags": ["plans"],
        "summary": "Plan 상태 변경",
        "description": "학습 계획의 상태를 변경합니다.\n\n**상태**: `draft`, `active`, `paused`, `completed`",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "planId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
                  }
                },
                "required": ["status"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan 상태가 변경되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
                        }
                      },
                      "required": ["id", "status"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/plans/{planId}/activate": {
      "post": {
        "tags": ["plans"],
        "summary": "Plan Active 설정",
        "description": "학습 계획을 활성화합니다. 기존 활성 계획은 자동으로 비활성화됩니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "planId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan이 ACTIVE로 설정되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["ACTIVE", "PAUSED", "ARCHIVED", "COMPLETED"]
                        }
                      },
                      "required": ["id", "status"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/home/queue": {
      "get": {
        "tags": ["sessions"],
        "summary": "오늘 할 일 큐 조회",
        "description": "오늘 학습해야 할 세션 목록을 조회합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "오늘 예정된 세션을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "kind": {
                            "type": "string",
                            "enum": ["SESSION"]
                          },
                          "sessionId": {
                            "type": "string",
                            "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                          },
                          "planId": {
                            "type": "string",
                            "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                          },
                          "planTitle": {
                            "type": "string",
                            "minLength": 1
                          },
                          "planIcon": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "planColor": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "moduleTitle": {
                            "type": "string",
                            "minLength": 1
                          },
                          "sessionTitle": {
                            "type": "string",
                            "minLength": 1
                          },
                          "sessionType": {
                            "type": "string",
                            "enum": ["LEARN"]
                          },
                          "estimatedMinutes": {
                            "type": "integer",
                            "minimum": 1
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "SCHEDULED",
                              "IN_PROGRESS",
                              "COMPLETED",
                              "SKIPPED",
                              "CANCELED"
                            ]
                          }
                        },
                        "required": [
                          "kind",
                          "sessionId",
                          "planId",
                          "planTitle",
                          "planIcon",
                          "planColor",
                          "moduleTitle",
                          "sessionTitle",
                          "sessionType",
                          "estimatedMinutes",
                          "status"
                        ]
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "completed": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "estimatedMinutes": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "coachingMessage": {
                          "type": "string",
                          "minLength": 1
                        },
                        "streakDays": {
                          "type": "integer",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "total",
                        "completed",
                        "estimatedMinutes",
                        "coachingMessage",
                        "streakDays"
                      ]
                    }
                  },
                  "required": ["data", "summary"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/runs": {
      "post": {
        "tags": ["sessions"],
        "summary": "Session Run 생성/재개",
        "description": "학습 세션을 시작하거나 중단된 세션을 재개합니다.\n\n**멱등성**: `Idempotency-Key` 헤더로 중복 요청 방지",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "sessionId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": false,
            "name": "Idempotency-Key",
            "in": "header"
          }
        ],
        "responses": {
          "200": {
            "description": "복구된 Run을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "runId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "sessionId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["RUNNING", "COMPLETED", "ABANDONED"]
                        },
                        "isRecovery": {
                          "type": "boolean"
                        },
                        "currentStep": {
                          "type": "integer",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "runId",
                        "sessionId",
                        "status",
                        "isRecovery",
                        "currentStep"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "201": {
            "description": "새 Run이 생성되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "runId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "sessionId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["RUNNING", "COMPLETED", "ABANDONED"]
                        },
                        "isRecovery": {
                          "type": "boolean"
                        },
                        "currentStep": {
                          "type": "integer",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "runId",
                        "sessionId",
                        "status",
                        "isRecovery",
                        "currentStep"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}": {
      "patch": {
        "tags": ["sessions"],
        "summary": "Plan Session 업데이트",
        "description": "세션 상태(SKIPPED/CANCELED 등) 또는 예정 날짜를 변경합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "sessionId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "SCHEDULED",
                      "IN_PROGRESS",
                      "COMPLETED",
                      "SKIPPED",
                      "CANCELED"
                    ]
                  },
                  "scheduledForDate": {
                    "type": "string",
                    "format": "date"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "세션이 업데이트되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "sessionId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "SCHEDULED",
                            "IN_PROGRESS",
                            "COMPLETED",
                            "SKIPPED",
                            "CANCELED"
                          ]
                        },
                        "scheduledForDate": {
                          "type": "string",
                          "format": "date"
                        }
                      },
                      "required": ["sessionId", "status", "scheduledForDate"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/session-runs": {
      "get": {
        "tags": ["sessions"],
        "summary": "Session Run 목록 조회",
        "description": "최근 실행된 세션 런 목록을 조회합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "required": false,
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "required": false,
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": ["RUNNING", "COMPLETED", "ABANDONED"]
            },
            "required": false,
            "name": "status",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Session Run 목록을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "runId": {
                            "type": "string",
                            "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                          },
                          "status": {
                            "type": "string",
                            "enum": ["RUNNING", "COMPLETED", "ABANDONED"]
                          },
                          "startedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "endedAt": {
                            "type": ["string", "null"],
                            "format": "date-time"
                          },
                          "exitReason": {
                            "type": ["string", "null"],
                            "enum": ["USER_EXIT", "NETWORK", "ERROR", "TIMEOUT"]
                          },
                          "durationMinutes": {
                            "type": "integer",
                            "minimum": 0
                          },
                          "sessionId": {
                            "type": "string",
                            "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                          },
                          "sessionTitle": {
                            "type": "string",
                            "minLength": 1
                          },
                          "sessionType": {
                            "type": "string",
                            "enum": ["LEARN"]
                          },
                          "planId": {
                            "type": "string",
                            "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                          },
                          "planTitle": {
                            "type": "string",
                            "minLength": 1
                          },
                          "planIcon": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "planColor": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "summary": {
                            "type": ["object", "null"],
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            },
                            "required": ["id", "createdAt"]
                          }
                        },
                        "required": [
                          "runId",
                          "status",
                          "startedAt",
                          "endedAt",
                          "exitReason",
                          "durationMinutes",
                          "sessionId",
                          "sessionTitle",
                          "sessionType",
                          "planId",
                          "planTitle",
                          "planIcon",
                          "planColor",
                          "summary"
                        ]
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "page": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 1
                        }
                      },
                      "required": ["total", "page", "limit"]
                    }
                  },
                  "required": ["data", "meta"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/session-runs/{runId}": {
      "get": {
        "tags": ["sessions"],
        "summary": "Session Run 상세 조회",
        "description": "세션 런과 블루프린트(스텝), 진행 상태를 조회합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Session Run 상세를 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "runId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["RUNNING", "COMPLETED", "ABANDONED"]
                        },
                        "startedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "endedAt": {
                          "type": ["string", "null"],
                          "format": "date-time"
                        },
                        "exitReason": {
                          "type": ["string", "null"],
                          "enum": ["USER_EXIT", "NETWORK", "ERROR", "TIMEOUT"]
                        },
                        "session": {
                          "type": "object",
                          "properties": {
                            "sessionId": {
                              "type": "string",
                              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                            },
                            "title": {
                              "type": "string",
                              "minLength": 1
                            },
                            "objective": {
                              "type": ["string", "null"]
                            },
                            "sessionType": {
                              "type": "string",
                              "enum": ["LEARN"]
                            },
                            "estimatedMinutes": {
                              "type": "integer",
                              "minimum": 1
                            },
                            "module": {
                              "type": ["object", "null"],
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "title": {
                                  "type": "string",
                                  "minLength": 1
                                }
                              },
                              "required": ["id", "title"]
                            },
                            "plan": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                                },
                                "title": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "icon": {
                                  "type": "string",
                                  "minLength": 1,
                                  "maxLength": 50
                                },
                                "color": {
                                  "type": "string",
                                  "minLength": 1,
                                  "maxLength": 50
                                }
                              },
                              "required": ["id", "title", "icon", "color"]
                            }
                          },
                          "required": [
                            "sessionId",
                            "title",
                            "objective",
                            "sessionType",
                            "estimatedMinutes",
                            "module",
                            "plan"
                          ]
                        },
                        "blueprint": {
                          "type": "object",
                          "properties": {
                            "schemaVersion": {
                              "type": "integer",
                              "exclusiveMinimum": 0
                            },
                            "blueprintId": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "steps": {
                              "type": "array",
                              "items": {
                                "oneOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["SESSION_INTRO"]
                                      },
                                      "planTitle": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 120
                                      },
                                      "moduleTitle": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 120
                                      },
                                      "sessionTitle": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 120
                                      },
                                      "durationMinutes": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 180
                                      },
                                      "difficulty": {
                                        "type": "string",
                                        "enum": [
                                          "beginner",
                                          "intermediate",
                                          "advanced"
                                        ]
                                      },
                                      "learningGoals": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 200
                                        },
                                        "minItems": 1,
                                        "maxItems": 5
                                      },
                                      "questionsToCover": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 200
                                        },
                                        "minItems": 1,
                                        "maxItems": 5
                                      },
                                      "prerequisites": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "maxItems": 5,
                                        "default": []
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "planTitle",
                                      "moduleTitle",
                                      "sessionTitle",
                                      "durationMinutes",
                                      "difficulty",
                                      "learningGoals",
                                      "questionsToCover"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["LEARN_CONTENT"]
                                      },
                                      "title": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 120
                                      },
                                      "contentMd": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 10000
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "title",
                                      "contentMd"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["CHECK"]
                                      },
                                      "question": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 500
                                      },
                                      "options": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 200
                                        }
                                      },
                                      "answerIndex": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "maximum": 3
                                      },
                                      "explanation": {
                                        "type": ["string", "null"],
                                        "maxLength": 500
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "question",
                                      "options",
                                      "answerIndex"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["CLOZE"]
                                      },
                                      "sentence": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 500
                                      },
                                      "blankId": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 50
                                      },
                                      "options": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        }
                                      },
                                      "answerIndex": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "maximum": 3
                                      },
                                      "explanation": {
                                        "type": ["string", "null"],
                                        "maxLength": 500
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "sentence",
                                      "blankId",
                                      "options",
                                      "answerIndex"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["MATCHING"]
                                      },
                                      "instruction": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 200
                                      },
                                      "pairs": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "minLength": 1,
                                              "maxLength": 50
                                            },
                                            "left": {
                                              "type": "string",
                                              "minLength": 1,
                                              "maxLength": 100
                                            },
                                            "right": {
                                              "type": "string",
                                              "minLength": 1,
                                              "maxLength": 100
                                            }
                                          },
                                          "required": ["id", "left", "right"]
                                        },
                                        "minItems": 2,
                                        "maxItems": 6
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "instruction",
                                      "pairs"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["FLASHCARD"]
                                      },
                                      "front": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 500
                                      },
                                      "back": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 1000
                                      }
                                    },
                                    "required": ["id", "type", "front", "back"]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["SPEED_OX"]
                                      },
                                      "statement": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 300
                                      },
                                      "isTrue": {
                                        "type": "boolean"
                                      },
                                      "explanation": {
                                        "type": ["string", "null"],
                                        "maxLength": 500
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "statement",
                                      "isTrue"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["APPLICATION"]
                                      },
                                      "scenario": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 1000
                                      },
                                      "question": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 500
                                      },
                                      "options": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 300
                                        },
                                        "minItems": 2,
                                        "maxItems": 4
                                      },
                                      "correctIndex": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "maximum": 3
                                      },
                                      "feedback": {
                                        "type": ["string", "null"],
                                        "maxLength": 500
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "scenario",
                                      "question",
                                      "options",
                                      "correctIndex"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80
                                      },
                                      "estimatedSeconds": {
                                        "type": ["integer", "null"],
                                        "exclusiveMinimum": 0,
                                        "maximum": 3600
                                      },
                                      "intent": {
                                        "type": ["string", "null"],
                                        "enum": [
                                          "INTRO",
                                          "EXPLAIN",
                                          "RETRIEVAL",
                                          "PRACTICE",
                                          "WRAPUP"
                                        ]
                                      },
                                      "type": {
                                        "type": "string",
                                        "enum": ["SESSION_SUMMARY"]
                                      },
                                      "celebrationEmoji": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 10,
                                        "default": "🎉"
                                      },
                                      "encouragement": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 200
                                      },
                                      "studyTimeMinutes": {
                                        "type": ["integer", "null"],
                                        "minimum": 0
                                      },
                                      "completedActivities": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "maxItems": 10,
                                        "default": []
                                      },
                                      "keyTakeaways": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 200
                                        },
                                        "minItems": 1,
                                        "maxItems": 5
                                      },
                                      "nextSessionPreview": {
                                        "type": ["object", "null"],
                                        "properties": {
                                          "title": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 120
                                          },
                                          "description": {
                                            "type": ["string", "null"],
                                            "maxLength": 200
                                          }
                                        },
                                        "required": ["title"]
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "type",
                                      "encouragement",
                                      "keyTakeaways"
                                    ]
                                  }
                                ]
                              },
                              "minItems": 1
                            },
                            "startStepIndex": {
                              "type": "integer",
                              "minimum": 0,
                              "default": 0
                            }
                          },
                          "required": [
                            "schemaVersion",
                            "blueprintId",
                            "createdAt",
                            "steps"
                          ]
                        },
                        "progress": {
                          "type": "object",
                          "properties": {
                            "stepIndex": {
                              "type": "integer",
                              "minimum": 0
                            },
                            "inputs": {
                              "type": "object",
                              "additionalProperties": {}
                            },
                            "savedAt": {
                              "type": ["string", "null"],
                              "format": "date-time"
                            }
                          },
                          "required": ["stepIndex", "inputs", "savedAt"]
                        },
                        "summary": {
                          "type": ["object", "null"],
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "summaryMd": {
                              "type": "string",
                              "minLength": 1
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            }
                          },
                          "required": ["id", "summaryMd", "createdAt"]
                        }
                      },
                      "required": [
                        "runId",
                        "status",
                        "startedAt",
                        "endedAt",
                        "exitReason",
                        "session",
                        "blueprint",
                        "progress",
                        "summary"
                      ]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/session-runs/{runId}/checkins": {
      "get": {
        "tags": ["sessions"],
        "summary": "Session Checkins 조회",
        "description": "세션 런에 기록된 체크인 로그를 조회합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "체크인 목록을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "kind": {
                            "type": "string",
                            "enum": [
                              "QUESTION",
                              "SELF_ASSESSMENT",
                              "BEHAVIOR_SIGNAL"
                            ]
                          },
                          "prompt": {
                            "type": "string",
                            "minLength": 1
                          },
                          "responseJson": {
                            "type": ["object", "null"],
                            "additionalProperties": {}
                          },
                          "recordedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "kind",
                          "prompt",
                          "responseJson",
                          "recordedAt"
                        ]
                      }
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["sessions"],
        "summary": "Session Checkin 기록",
        "description": "세션 런에 체크인을 기록합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "enum": ["QUESTION", "SELF_ASSESSMENT", "BEHAVIOR_SIGNAL"]
                  },
                  "prompt": {
                    "type": "string",
                    "minLength": 1
                  },
                  "responseJson": {
                    "type": "object",
                    "additionalProperties": {}
                  }
                },
                "required": ["kind", "prompt"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "체크인이 기록되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "recordedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": ["id", "recordedAt"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/session-runs/{runId}/activities": {
      "get": {
        "tags": ["sessions"],
        "summary": "Session Activities 조회",
        "description": "세션 런에 기록된 액티비티 로그를 조회합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "액티비티 목록을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "kind": {
                            "type": "string",
                            "enum": ["EXERCISE", "MCQ", "FREEFORM", "CODE"]
                          },
                          "prompt": {
                            "type": "string",
                            "minLength": 1
                          },
                          "userAnswer": {
                            "type": ["string", "null"]
                          },
                          "aiEvalJson": {
                            "type": ["object", "null"],
                            "additionalProperties": {}
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "kind",
                          "prompt",
                          "userAnswer",
                          "aiEvalJson",
                          "createdAt"
                        ]
                      }
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["sessions"],
        "summary": "Session Activity 기록",
        "description": "세션 런에 학습 액티비티를 기록합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "enum": ["EXERCISE", "MCQ", "FREEFORM", "CODE"]
                  },
                  "prompt": {
                    "type": "string",
                    "minLength": 1
                  },
                  "userAnswer": {
                    "type": "string"
                  },
                  "aiEvalJson": {
                    "type": "object",
                    "additionalProperties": {}
                  }
                },
                "required": ["kind", "prompt"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "액티비티가 기록되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": ["id", "createdAt"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/session-runs/{runId}/progress": {
      "patch": {
        "tags": ["sessions"],
        "summary": "Session Run 진행 저장",
        "description": "학습 진행 상황을 저장합니다. 현재 읽고 있는 개념 위치 등을 기록합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "stepIndex": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "inputs": {
                    "type": "object",
                    "additionalProperties": {}
                  }
                },
                "required": ["stepIndex", "inputs"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "진행이 저장되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "runId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "savedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      },
                      "required": ["runId", "savedAt"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/session-runs/{runId}/complete": {
      "post": {
        "tags": ["sessions"],
        "summary": "Session Run 완료",
        "description": "학습 세션을 정상적으로 완료 처리합니다. 학습 시간이 기록됩니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Session Run이 완료되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "runId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["RUNNING", "COMPLETED", "ABANDONED"]
                        },
                        "summary": {
                          "type": ["object", "null"],
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        }
                      },
                      "required": ["runId", "status", "summary"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/session-runs/{runId}/abandon": {
      "post": {
        "tags": ["sessions"],
        "summary": "Session Run 중단",
        "description": "학습 세션을 중단합니다. 중단 사유를 함께 기록할 수 있습니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string",
                    "enum": ["USER_EXIT", "NETWORK", "ERROR", "TIMEOUT"]
                  }
                },
                "required": ["reason"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session Run이 중단되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "runId": {
                          "type": "string",
                          "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["RUNNING", "COMPLETED", "ABANDONED"]
                        }
                      },
                      "required": ["runId", "status"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/threads": {
      "post": {
        "tags": ["chat"],
        "summary": "채팅 스레드 생성",
        "description": "AI 튜터와 대화할 새 채팅 스레드를 생성합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "scopeType": {
                    "type": "string",
                    "enum": ["PLAN", "SESSION"]
                  },
                  "scopeId": {
                    "type": "string",
                    "pattern": "^[0123456789abcdefghijklmnopqrstuvwxyz]{12}$"
                  }
                },
                "required": ["scopeType", "scopeId"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "채팅 스레드가 생성되었습니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "threadId": {
                          "type": "string",
                          "format": "uuid"
                        }
                      },
                      "required": ["threadId"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/threads/{threadId}/messages": {
      "post": {
        "tags": ["chat"],
        "summary": "메시지 전송",
        "description": "AI 튜터에게 질문을 보내고 답변을 받습니다. 학습 자료 컨텍스트 기반으로 응답합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "threadId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": ["content"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI 답변을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "role": {
                          "type": "string",
                          "enum": ["USER", "ASSISTANT", "SYSTEM"]
                        },
                        "contentMd": {
                          "type": "string",
                          "minLength": 1
                        },
                        "citations": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "chunkId": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "materialTitle": {
                                "type": "string",
                                "minLength": 1
                              },
                              "quote": {
                                "type": "string",
                                "minLength": 1
                              },
                              "pageRange": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["chunkId", "materialTitle", "quote"]
                          }
                        }
                      },
                      "required": ["id", "role", "contentMd"]
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["chat"],
        "summary": "스레드 메시지 목록",
        "description": "채팅 스레드의 전체 대화 내역을 조회합니다.",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "threadId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "메시지 목록을 반환합니다.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "role": {
                            "type": "string",
                            "enum": ["USER", "ASSISTANT", "SYSTEM"]
                          },
                          "contentMd": {
                            "type": "string",
                            "minLength": 1
                          },
                          "citations": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "chunkId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "materialTitle": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "quote": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "pageRange": {
                                  "type": "string",
                                  "minLength": 1
                                }
                              },
                              "required": ["chunkId", "materialTitle", "quote"]
                            }
                          }
                        },
                        "required": ["id", "role", "contentMd"]
                      }
                    }
                  },
                  "required": ["data"]
                }
              }
            }
          },
          "default": {
            "description": "에러 응답",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "minLength": 1
                        },
                        "message": {
                          "type": "string",
                          "minLength": 1
                        },
                        "details": {
                          "type": "object",
                          "additionalProperties": {}
                        },
                        "validation": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "field": {
                                "type": "string",
                                "minLength": 1
                              },
                              "code": {
                                "type": "string",
                                "minLength": 1
                              },
                              "message": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": ["field", "code", "message"]
                          }
                        }
                      },
                      "required": ["code", "message"]
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    }
  },
  "webhooks": {}
}
